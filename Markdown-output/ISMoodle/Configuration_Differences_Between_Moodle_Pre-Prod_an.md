# Configuration Differences Between Moodle Pre-Prod an

Below are the config differences between moodle pre-production and production,

| PRE-PROD                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | PROD                                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------|
| innodb\_buffer\_pool\_size         = 83G                                                                                                                                                                                                                                                                                                                                                                                                                                            | innodb\_buffer\_pool\_size         = 24G                                              |
| innodb\_flush\_method             = O\_DIRECT                                                                                                                                                                                                                                                                                                                                                                                                                                       | innodb\_flush\_method             = O\_DSYNC                                          |
| read\_buffer\_size                = 4M                                                                                                                                                                                                                                                                                                                                                                                                                                              | read\_buffer\_size                = 8M                                                |
| innodb\_log\_files\_in\_group       = 2                                                                                                                                                                                                                                                                                                                                                                                                                                             | innodb\_log\_files\_in\_group       = 3                                               |
| innodb\_read\_io\_threads          = 16                                                                                                                                                                                                                                                                                                                                                                                                                                             | innodb\_read\_io\_threads          = 8                                                |
| join\_buffer\_size                = 16M                                                                                                                                                                                                                                                                                                                                                                                                                                             | join\_buffer\_size                = 4M                                                |
| max\_heap\_table\_size             = 256M                                                                                                                                                                                                                                                                                                                                                                                                                                           | max\_heap\_table\_size             = 64M                                              |
| query\_cache\_size                = 0                                                                                                                                                                                                                                                                                                                                                                                                                                               | query\_cache\_size                = 196M                                              |
| query\_cache\_type                = 0                                                                                                                                                                                                                                                                                                                                                                                                                                               | query\_cache\_type                = 1                                                 |
| plugin-load=thread\_pool=[thread\_pool.so](http://thread_pool.so);TP\_THREAD\_STATE=[thread\_pool.so](http://thread_pool.so);TP\_THREAD\_GROUP\_STATE=[thread\_pool.so](http://thread_pool.so);TP\_THREAD\_GROUP\_STATS=[thread\_pool.so](http://thread_pool.so)                                                                                                                                                                                                                    | Not Configured                                                                        |
| innodb\_buffer\_pool\_dump\_pct     = 75                                                                                                                                                                                                                                                                                                                                                                                                                                            | innodb\_buffer\_pool\_dump\_pct                              | 25                     |
| log\_queries\_not\_using\_indexes   = off                                                                                                                                                                                                                                                                                                                                                                                                                                           | log\_queries\_not\_using\_indexes   = 1                                               |
| max\_connections                 = 3000                                                                                                                                                                                                                                                                                                                                                                                                                                             | max\_connections                 = 780                                                |
| host\_cache\_size                                          | 703                                                                                                                                                                                                                                                                                                                                                                                                                    | host\_cache\_size                                          | 642                      |
| innodb\_open\_files                                        | 1495                                                                                                                                                                                                                                                                                                                                                                                                                   | innodb\_open\_files                                        | 2105                     |
| thread\_handling                                          | loaded-dynamically                                                                                                                                                                                                                                                                                                                                                                                                      | thread\_handling                                          | one-thread-per-connection |
| thread\_pool\_algorithm                                    | 0                                                                                                                                                                                                                                                                                                                                                                                                               |      | Not Configured                                                                        |
| | thread\_pool\_high\_priority\_connection                     | 0                                                                                                                                                                                                                                                                                                                                                                                                               |  | Not Configured                                                                        |
| | thread\_pool\_max\_unused\_threads                           | 0                                                                                                                                                                                                                                                                                                                                                                                                               |  | Not Configured                                                                        |
| | thread\_pool\_prio\_kickup\_timer                            | 1000                                                                                                                                                                                                                                                                                                                                                                                                             | | Not Configured                                                                        |
| | thread\_pool\_size                                         | 24                                                                                                                                                                                                                                                                                                                                                                                                              |    | Not Configured                                                                        |
| | thread\_pool\_stall\_limit                                  | 100                                                                                                                                                                                                                                                                                                                                                                                                                 | Not Configured                                                                        |


